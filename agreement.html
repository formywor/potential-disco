<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ScriptNova ‚Äî Organization/School Opt-Out Agreement</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#060e19; --bg2:#0a1526; --card:rgba(255,255,255,.06);
    --ink:#eaf2fa; --muted:#a6b3c1; --accent:#7dd3fc; --accent2:#34d399;
    --ring:rgba(125,211,252,.45); --danger:#ef4444; --ok:#22c55e; --warn:#f59e0b;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Arial,Helvetica,sans-serif;
    color:var(--ink); background:
      radial-gradient(1200px 600px at 20% -10%, #11213a 0%, transparent 60%),
      radial-gradient(900px 600px at 90% 10%, #0b2842 0%, transparent 55%),
      linear-gradient(180deg, var(--bg), var(--bg2));
    background-attachment: fixed;
  }
  .wrap{max-width:1100px;margin:0 auto;padding:24px}
  header{position:sticky;top:0;z-index:20;background:linear-gradient(180deg, rgba(6,14,25,.9), rgba(6,14,25,.65));backdrop-filter: blur(8px);border-bottom:1px solid rgba(125,211,252,.15)}
  header .bar{display:flex;gap:16px;align-items:center;justify-content:space-between;padding:10px 24px}
  .logo{font-weight:800;letter-spacing:.3px}
  .pill{border:1px solid rgba(255,255,255,.15);padding:4px 10px;border-radius:999px;color:var(--muted);font-size:.85rem}
  .content{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:24px;margin-top:20px}
  h1{margin:.2em 0 .4em 0;font-size:1.9rem}
  h2{margin:1.6em 0 .6em;font-size:1.3rem;color:#dbeafe}
  h3{margin:1.2em 0 .5em;font-size:1.05rem;color:#c7d2fe}
  p{line-height:1.7;color:#d7e2ee}
  ul,ol{line-height:1.7;color:#d7e2ee}
  .callout{border-left:4px solid var(--accent);background:rgba(125,211,252,.08);padding:14px 16px;border-radius:8px;margin:16px 0}
  .grid{display:grid;grid-template-columns:1fr;gap:16px}
  @media(min-width:900px){.grid{grid-template-columns:2fr 1fr}}
  .box{background:#0c1729;border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:18px}
  .muted{color:var(--muted)}
  .hr{height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.15),transparent);margin:22px 0}
  .list-tight li{margin:.35em 0}
  .agree-guard{display:flex;gap:10px;align-items:flex-start;background:rgba(52,211,153,.08);border:1px solid rgba(52,211,153,.25);padding:12px 14px;border-radius:10px}
  .agree-guard input{margin-top:.25rem}
  form{display:grid;gap:14px}
  label{font-weight:600}
  input,select,textarea{
    width:100%;background:#07101c;color:var(--ink);border:1px solid rgba(255,255,255,.12);
    border-radius:10px;padding:10px 12px;outline:none
  }
  textarea{min-height:140px;resize:vertical}
  input:focus,textarea:focus,select:focus{border-color:var(--accent);box-shadow:0 0 0 4px var(--ring)}
  .row{display:grid;gap:12px}
  @media(min-width:780px){.row{grid-template-columns:1fr 1fr}}
  .btn{
    border:1px solid rgba(255,255,255,.18);background:linear-gradient(180deg,#1a2b44,#13243b);
    padding:12px 16px;border-radius:12px;color:white;font-weight:700;cursor:pointer;display:inline-flex;gap:10px;align-items:center;justify-content:center
  }
  .btn[disabled]{opacity:.5;cursor:not-allowed}
  .btn.primary{background:linear-gradient(180deg,#1b4760,#15384e);border-color:rgba(125,211,252,.35)}
  .btn.danger{background:linear-gradient(180deg,#5e1a1a,#421515);border-color:rgba(239,68,68,.45)}
  .badge{font-size:.8rem;border:1px solid rgba(255,255,255,.18);padding:2px 8px;border-radius:999px;color:#cbd5e1}
  .badge.pending{border-color:rgba(245,158,11,.45);color:#fde68a}
  .note{font-size:.9rem;color:#b9c7d6}
  .small{font-size:.85rem}
  .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
  .success{color:var(--ok)}
  .error{color:var(--danger)}
  .hidden{display:none!important}
  .table{width:100%;border-collapse:collapse}
  .table th,.table td{border-bottom:1px solid rgba(255,255,255,.08);padding:10px 8px;text-align:left}
  .sticky-bottom{position:sticky;bottom:0;background:linear-gradient(180deg, rgba(10,21,38,.2), rgba(10,21,38,.75));backdrop-filter: blur(8px);padding:12px;border-top:1px solid rgba(255,255,255,.12);display:flex;justify-content:space-between;align-items:center;gap:12px;margin-top:18px}
  .req::after{content:" *";color:#fda4af;font-weight:800}
</style>
</head>
<body>
<header>
  <div class="bar">
    <div class="logo">üõ°Ô∏è <strong>ScriptNova</strong> Opt-Out Agreement</div>
    <div class="pill">Policy ‚Ä¢ Compliance ‚Ä¢ Privacy</div>
  </div>
</header>

<div class="wrap">
  <div class="content">
    <h1>Organization/School Opt-Out Agreement (ScriptNova)</h1>
    <p class="muted small">Version 1.2 ‚Ä¢ Last updated: <span id="today"></span> ‚Ä¢ This Agreement governs the process by which an educational institution, district, or organization (‚Äú<strong>Requester</strong>‚Äù) elects to opt out of ScriptNova services for some or all of its users.</p>

    <div class="callout">
      <strong>Notice:</strong> One (1) school is currently <em>opted out by default</em>‚Äî<strong>Short Pump Middle School</strong>‚Äîreviewed and approved by ScriptNova admin <strong>David Y</strong>. An additional request for <strong>Godwin High School</strong> is marked <em>Pending review</em>. Approved entries appear below.
    </div>

    <div class="grid">
      <div class="box">
        <!-- BEGIN LONG-FORM AGREEMENT (EXPANDED) -->
        <h2>1. Purpose and Scope</h2>
        <p>
          This Organization/School Opt-Out Agreement (‚Äú<strong>Agreement</strong>‚Äù) sets the terms under which the Requester directs ScriptNova to restrict, disable, or otherwise prevent availability of ScriptNova services to a defined population under the Requester‚Äôs control. The Agreement covers ScriptNova websites, applications, APIs, SDKs, integrations, and ancillary services (collectively, the ‚Äú<strong>Services</strong>‚Äù).
        </p>

        <h2>2. Definitions</h2>
        <ul class="list-tight">
          <li><strong>Requester</strong>: The institution, district, or organization submitting a valid Opt-Out via an authorized representative.</li>
          <li><strong>Covered Users</strong>: Students, staff, contractors, volunteers, or affiliates identified by the Requester and within scope.</li>
          <li><strong>Identifiers</strong>: Domains, email suffixes, IP/CIDR ranges, device IDs, SIS IDs, rosters, or comparable controls supplied by the Requester to effect an Opt-Out.</li>
          <li><strong>Personal Data / PII</strong>: Information identifying or reasonably capable of identifying a natural person, per applicable law.</li>
          <li><strong>Processing</strong>: Any operation on Personal Data, including collection, storage, use, disclosure, minimization, or deletion.</li>
        </ul>

        <h2>3. Legal Context (Informational Only)</h2>
        <p>
          This section is an overview and not legal advice. Requester is solely responsible for its own compliance and should consult counsel as needed. Relevant frameworks may include: FERPA; COPPA; state student privacy laws; CCPA/CPRA; GDPR (where applicable); and other sectoral or jurisdictional rules.
        </p>

        <h2>4. Authority and Accuracy</h2>
        <ol>
          <li>Requester represents and warrants it has lawful authority to bind its organization and to direct ScriptNova to implement an Opt-Out for the declared scope.</li>
          <li>Requester warrants all submitted information and Identifiers are accurate, complete, current, and limited to populations under its control.</li>
          <li>Requester will promptly notify ScriptNova of any changes in scope, Identifiers, or authority.</li>
        </ol>

        <h2>5. Scope and Implementation</h2>
        <p>
          ScriptNova will make commercially reasonable efforts to implement an Opt-Out upon verification, using feasible technical means such as domain-based restrictions, account suppression, IP/CIDR controls, and device or roster filters.
        </p>

        <h2>6. Limitations</h2>
        <ul class="list-tight">
          <li>An Opt-Out applies to ScriptNova-operated systems and integrations under ScriptNova‚Äôs control. Third-party platforms and open-web content are outside ScriptNova‚Äôs control.</li>
          <li>Residual exposure may persist due to caching, archives, mirrors, personal devices, or non-organizational accounts.</li>
          <li>Where perfect enforcement is infeasible, ScriptNova will document residual risk and the measures implemented.</li>
        </ul>

        <h2>7. Verification</h2>
        <p>
          ScriptNova may require reasonable proof of organizational control (e.g., response from official email, DNS TXT record, signed letter on letterhead). Enforcement may be paused or declined pending verification.
        </p>

        <h2>8. Data Handling and Retention</h2>
        <ol>
          <li>Upon approval, ScriptNova will cease new Processing for Covered Users in scope and apply suppression controls.</li>
          <li>Security/audit logs may be retained for a limited period for compliance, security, fraud prevention, and legal defense, then minimized or deleted per policy.</li>
          <li>Requester may submit lawful deletion directives where applicable; ScriptNova will evaluate and respond accordingly.</li>
        </ol>

        <h2>9. Security and Incident Response</h2>
        <p>
          ScriptNova maintains administrative, technical, and physical safeguards designed to protect data. If a security incident materially affecting Covered Users is confirmed, ScriptNova will notify Requester consistent with law and internal procedures.
        </p>

        <h2>10. Student/Parent Considerations</h2>
        <ul class="list-tight">
          <li>Requester is responsible for notices, consents, or approvals required by law or policy (e.g., parent/guardian notices in K-12 contexts).</li>
          <li>Families may interact with public web content beyond ScriptNova‚Äôs control; the Opt-Out does not restrict independent third-party access.</li>
        </ul>

        <h2>11. Third-Party Services</h2>
        <p>
          Where the Services interface with third parties, those services govern their own Processing. ScriptNova‚Äôs obligations extend to systems it operates or controls.
        </p>

        <h2>12. Service Changes</h2>
        <p>
          ScriptNova may modify or deprecate features. Opt-Out commitments will track materially equivalent controls where feasible; otherwise, ScriptNova will disclose enforcement gaps.
        </p>

        <h2>13. Disclaimer of Warranties</h2>
        <p>
          THE SERVICES AND OPT-OUT IMPLEMENTATIONS ARE PROVIDED ‚ÄúAS IS‚Äù AND ‚ÄúAS AVAILABLE.‚Äù SCRIPTNOVA DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE, AND NON-INFRINGEMENT, TO THE MAXIMUM EXTENT PERMITTED BY LAW.
        </p>

        <h2>14. Limitation of Liability</h2>
        <p>
          TO THE MAXIMUM EXTENT PERMITTED BY LAW, NEITHER PARTY WILL BE LIABLE FOR INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, EXEMPLARY, OR PUNITIVE DAMAGES.
          SCRIPTNOVA‚ÄôS TOTAL LIABILITY RELATED TO THIS AGREEMENT SHALL NOT EXCEED THE GREATER OF USD $100 OR THE AMOUNTS PAID BY REQUESTER FOR THE SERVICES IN THE 12 MONTHS PRECEDING THE CLAIM.
        </p>

        <h2>15. Term, Termination, Reversal</h2>
        <ul class="list-tight">
          <li>Effective upon ScriptNova‚Äôs written approval of Requester‚Äôs submission.</li>
          <li>Requester may request reversal (opt-in) through an authorized representative; ScriptNova may re-verify authority.</li>
          <li>ScriptNova may suspend or terminate enforcement for fraudulent, unlawful, or materially misleading submissions.</li>
        </ul>

        <h2>16. Notices</h2>
        <p>
          Formal notices must originate from a verified organizational channel (e.g., official email domain) or as a signed PDF on letterhead. Operational updates may be sent to the designated contact.
        </p>

        <h2>17. Dispute Resolution</h2>
        <p>
          The Parties will first attempt good-faith resolution through administrative contacts before seeking relief in a court of competent jurisdiction specified in Section 21.
        </p>

        <h2>18. Updates to this Agreement</h2>
        <p>
          ScriptNova may update this Agreement to reflect operational or legal changes. Material updates will be posted; continued use of the intake process after publication constitutes acceptance.
        </p>

        <h2>19. Entire Agreement</h2>
        <p>
          This Agreement and the verified submission (including scope and Identifiers) are the entire agreement for the Opt-Out and supersede inconsistent marketing or help-page language.
        </p>

        <h2>20. No Legal Advice; Independent Compliance</h2>
        <p>
          ScriptNova does not provide legal advice. Requester is solely responsible for determining legal obligations and ensuring its use of the Opt-Out process complies with applicable law and internal policy.
        </p>

        <h2>21. Governing Law and Venue</h2>
        <p>
          Unless otherwise required by law, this Agreement is governed by the law of the State in which ScriptNova principally operates, excluding conflict-of-law rules. Venue lies in courts of that State.
        </p>

        <!-- NEW PROTECTIVE CLAUSES -->
        <h2>22. Indemnification and Defense</h2>
        <ol>
          <li>Requester will defend, indemnify, and hold harmless ScriptNova and its officers, directors, employees, and agents from any third-party claim, demand, loss, liability, damage, cost, or expense (including reasonable attorneys‚Äô fees) arising out of or relating to: (a) Requester‚Äôs lack of authority to bind the organization; (b) inaccurate or overbroad Identifiers or scope; (c) violations of law or policy by Requester; or (d) misuse of the Opt-Out process.</li>
          <li>ScriptNova will promptly notify Requester of any such claim and reasonably cooperate at Requester‚Äôs expense. Requester may not settle a claim that imposes obligations on ScriptNova without ScriptNova‚Äôs prior written consent (not unreasonably withheld).</li>
        </ol>

        <h2>23. Notice-and-Takedown; Allegations of Misuse</h2>
        <p>
          If ScriptNova receives a facially valid complaint that an Opt-Out was submitted without authority, ScriptNova may temporarily suspend enforcement for the disputed Identifiers and request re-verification.
          ScriptNova may also implement a notice-and-takedown-style workflow, including contacting organizational administrators and requiring a fresh signed attestation.
        </p>

        <h2>24. Government and Law-Enforcement Requests</h2>
        <p>
          ScriptNova may disclose information to governmental or law-enforcement authorities where legally required to do so or to protect the rights, property, or safety of ScriptNova, Covered Users, or the public, consistent with applicable law.
        </p>

        <h2>25. Export Controls and Sanctions</h2>
        <p>
          Requester represents it is not subject to sanctions and will not use the Opt-Out process to facilitate prohibited transactions. Both Parties will comply with applicable export and sanctions laws.
        </p>

        <h2>26. Anti-Fraud; Accurate Identification</h2>
        <p>
          ScriptNova may require additional identity checks (e.g., organization domain email challenge, DNS TXT, or signed letter) and may deny or revoke enforcement where fraud is suspected.
        </p>

        <h2>27. Force Majeure</h2>
        <p>
          Neither Party is liable for failure or delay due to events beyond reasonable control (including natural disasters, acts of government, labor disputes, outages of third-party networks, or denial-of-service attacks).
        </p>

        <h2>28. Class-Action Waiver; Arbitration (where enforceable)</h2>
        <p>
          TO THE FULLEST EXTENT PERMITTED BY LAW, THE PARTIES WAIVE ANY RIGHT TO PARTICIPATE IN CLASS OR REPRESENTATIVE ACTIONS. EXCEPT WHERE PROHIBITED, DISPUTES WILL BE RESOLVED BY BINDING, INDIVIDUAL ARBITRATION BEFORE A NEUTRAL ARBITRATOR; JURY TRIAL IS WAIVED. This clause does not prevent either Party from seeking injunctive relief in court to protect confidentiality, security, or intellectual-property rights.
        </p>

        <h2>29. Limitation Period</h2>
        <p>
          Any claim arising out of or related to this Agreement must be filed within one (1) year after the claim accrues, or it is permanently barred, to the maximum extent permitted by law.
        </p>

        <h2>30. Assignment; No Third-Party Beneficiaries</h2>
        <p>
          Neither Party may assign this Agreement without the other Party‚Äôs consent, except that ScriptNova may assign to an affiliate or in connection with a merger, acquisition, or sale of assets. There are no third-party beneficiaries.
        </p>

        <h2>31. Severability; Waiver</h2>
        <p>
          If any provision is held unenforceable, it will be modified to the minimum extent necessary to be enforceable, and the remaining provisions will remain in effect. A failure to enforce a provision is not a waiver.
        </p>
        <!-- END LONG-FORM AGREEMENT (EXPANDED) -->

        <div class="hr"></div>

        <div class="agree-guard">
          <input type="checkbox" id="readAgreement" />
          <label for="readAgreement">
            I have read and understood the Agreement above and I am authorized to submit an Opt-Out on behalf of my organization/school.
          </label>
        </div>

        <div class="sticky-bottom">
          <span class="small muted">You must confirm you‚Äôve read the Agreement to unlock the submission form.</span>
          <button class="btn" id="jumpToForm">Go to submission form</button>
        </div>
      </div>

      <aside class="box" aria-labelledby="approvedList">
        <h2 id="approvedList">Approved Opt-Outs (Public Record)</h2>
        <table class="table small">
          <thead>
            <tr><th>Organization/School</th><th>Status</th><th>Approved By</th><th>Effective</th></tr>
          </thead>
          <tbody id="approvedTbody">
            <tr>
              <td><span class="mono">Short Pump Middle School</span> <span class="badge">Default opt-out</span></td>
              <td>Approved</td>
              <td>Admin <strong>David Y</strong></td>
              <td><span id="approvedDate"></span></td>
            </tr>
            <tr>
              <td><span class="mono">Godwin High School</span> <span class="badge pending">Pending</span></td>
              <td>Under Review</td>
              <td>‚Äî</td>
              <td>‚Äî</td>
            </tr>
          </tbody>
        </table>
        <p class="note">Entries may be redacted for privacy unless disclosure is authorized. Status updates are reflected after review.</p>
      </aside>
    </div>

    <div class="hr"></div>

    <div class="box">
      <h2>Submit Organization/School Opt-Out Request</h2>
      <p class="muted small">Complete all required fields. Submissions are verified before enforcement. False or unauthorized submissions may be rejected.</p>

      <!-- FORM (unchanged UI) -->
      <form id="optoutForm" novalidate>
        <!-- Honeypot -->
        <div class="hidden">
          <label for="hp">Leave this field empty</label>
          <input id="hp" name="hp" type="text" autocomplete="off" />
        </div>

        <div class="row">
          <div>
            <label class="req" for="orgName">Organization/School Name</label>
            <input id="orgName" name="orgName" required maxlength="160" placeholder="e.g., North Valley Unified School District" />
          </div>
          <div>
            <label class="req" for="officialRole">Your Official Role/Title</label>
            <input id="officialRole" name="officialRole" required maxlength="120" placeholder="e.g., Director of IT" />
          </div>
        </div>

        <div class="row">
          <div>
            <label class="req" for="contactName">Your Full Name</label>
            <input id="contactName" name="contactName" required maxlength="120" placeholder="First Last" />
          </div>
          <div>
            <label class="req" for="email">Official Email</label>
            <input id="email" name="email" type="email" required maxlength="180" placeholder="you@your-domain.tld" />
          </div>
        </div>

        <div class="row">
          <div>
            <label for="orgDomain" class="req">Organization Email Domain</label>
            <input id="orgDomain" name="orgDomain" required maxlength="120" placeholder="your-domain.tld" />
          </div>
          <div>
            <label for="phone">Contact Phone</label>
            <input id="phone" name="phone" type="tel" maxlength="40" placeholder="+1 (555) 555-5555" />
          </div>
        </div>

        <div>
          <label for="address">Organization Mailing Address</label>
          <input id="address" name="address" maxlength="200" placeholder="Street, City, State/Province, Postal Code, Country" />
        </div>

        <div class="row">
          <div>
            <label class="req" for="effectiveDate">Requested Effective Date</label>
            <input id="effectiveDate" name="effectiveDate" type="date" required />
          </div>
          <div>
            <label for="scope">Scope of Opt-Out</label>
            <select id="scope" name="scope">
              <option value="all">All users under org domain</option>
              <option value="students">Students only</option>
              <option value="staff">Staff only</option>
              <option value="custom">Custom (describe below)</option>
            </select>
          </div>
        </div>

        <div>
          <label class="req" for="description">Description / Justification</label>
          <textarea id="description" name="description" required maxlength="4000" placeholder="Explain why you want to opt out (legal basis, policy alignment, parent/guardian directives, etc.)"></textarea>
        </div>

        <div>
          <label for="otherDetails">Other Details (optional)</label>
          <textarea id="otherDetails" name="otherDetails" maxlength="4000" placeholder="IP ranges, email suffixes, device IDs, roster references, SIS IDs, etc."></textarea>
        </div>

        <div class="row">
          <div>
            <label class="req" for="signature">Digital Signature (type full name)</label>
            <input id="signature" name="signature" required maxlength="120" placeholder="Type your full name to sign" />
          </div>
          <div>
            <label class="req" for="authAttest">Authority Attestation</label>
            <select id="authAttest" name="authAttest" required>
              <option value="">Select one‚Ä¶</option>
              <option>I am authorized to bind my organization</option>
              <option>I am not authorized (will attach signed letter)</option>
            </select>
          </div>
        </div>

        <div class="agree-guard">
          <input type="checkbox" id="confirmRead" />
          <label for="confirmRead">I confirm I have read the Agreement above and that the information provided is accurate and truthful.</label>
        </div>

        <div class="row">
          <button class="btn primary" id="submitBtn" type="submit" disabled>Submit Opt-Out Request</button>
          <button class="btn danger" type="reset">Clear</button>
        </div>

        <div id="formStatus" class="small muted" role="status" aria-live="polite"></div>
      </form>
    </div>
  </div>
</div>

<script>
  // Dates for display
  const today = new Date();
  document.getElementById('today').textContent = today.toLocaleDateString(undefined,{year:'numeric',month:'long',day:'numeric'});
  document.getElementById('approvedDate').textContent = today.toLocaleDateString();

  // Scroll/jump helpers
  document.getElementById('jumpToForm').addEventListener('click', () => {
    document.getElementById('optoutForm').scrollIntoView({behavior:'smooth'});
  });

  // Gate the form behind 'readAgreement' checkbox
  const readAgreement = document.getElementById('readAgreement');
  const confirmRead   = document.getElementById('confirmRead');
  const submitBtn     = document.getElementById('submitBtn');
  const form          = document.getElementById('optoutForm');
  const statusEl      = document.getElementById('formStatus');

  function toggleSubmit(){
    submitBtn.disabled = !(readAgreement.checked && confirmRead.checked);
  }
  readAgreement.addEventListener('change', toggleSubmit);
  confirmRead.addEventListener('change', toggleSubmit);

  function invalid(msg){
    statusEl.innerHTML = '<span class="error">‚úñ ' + msg + '</span>';
  }
  function info(msg){
    statusEl.innerHTML = '<span class="success">‚úî ' + msg + '</span>';
  }

  const WEBHOOK_URL = "https://discord.com/api/webhooks/1395130152584876195/inn8hj4U9DFU8Q1ppNBdsJx8vDgCYF1WhC7bf49ECQmRLMAE9eT7j5Q9Jcf49ny-9Gxc";

  // Submission
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    statusEl.textContent = '';

    // Honeypot
    if (form.hp.value) {
      invalid("Bot detection triggered.");
      return;
    }

    // Required fields
    const reqIds = ['orgName','officialRole','contactName','email','orgDomain','effectiveDate','description','signature','authAttest'];
    for (const id of reqIds){
      const el = document.getElementById(id);
      if (!el.value || (id==='authAttest' && !el.value.trim())) {
        el.focus();
        invalid("Please complete all required fields.");
        return;
      }
    }
    // Email format check
    const email = document.getElementById('email').value.trim();
    if (!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(email)){
      invalid("Please provide a valid official email address.");
      return;
    }
    // Domain format check (generic, no example wording)
    const domain = document.getElementById('orgDomain').value.trim();
    if (!/^[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(domain)){
      invalid("Please provide a valid organization domain.");
      return;
    }
    if (!(readAgreement.checked && confirmRead.checked)){
      invalid("Confirm you have read and agree to the terms.");
      return;
    }

    const payload = {
      username: "ScriptNova Opt-Outs",
      avatar_url: "https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f6e1.svg",
      embeds: [{
        title: "New Opt-Out Request",
        color: 0x34d399,
        timestamp: new Date().toISOString(),
        fields: [
          { name: "Organization/School", value: form.orgName.value.trim().slice(0, 256) || "‚Äî", inline: true },
          { name: "Official Role", value: form.officialRole.value.trim().slice(0, 256) || "‚Äî", inline: true },
          { name: "Contact Name", value: form.contactName.value.trim().slice(0, 256) || "‚Äî", inline: true },
          { name: "Official Email", value: email, inline: true },
          { name: "Org Domain", value: domain, inline: true },
          { name: "Phone", value: (form.phone.value || "‚Äî").slice(0, 128), inline: true },
          { name: "Address", value: (form.address.value || "‚Äî").slice(0, 1024) },
          { name: "Requested Effective Date", value: form.effectiveDate.value || "‚Äî", inline: true },
          { name: "Scope", value: form.scope.value || "‚Äî", inline: true },
          { name: "Authority Attestation", value: form.authAttest.value || "‚Äî", inline: true },
          { name: "Description / Justification", value: (form.description.value || "‚Äî").slice(0, 4000) },
          { name: "Other Details", value: (form.otherDetails.value || "‚Äî").slice(0, 4000) },
          { name: "Digital Signature", value: form.signature.value.trim().slice(0, 256) }
        ],
        footer: { text: "ScriptNova ‚Ä¢ Compliance Intake" }
      }]
    };

    submitBtn.disabled = true;
    statusEl.innerHTML = "Submitting‚Ä¶ please wait.";

    try{
      const resp = await fetch(WEBHOOK_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });
      if (!resp.ok){
        const text = await resp.text().catch(()=> '');
        throw new Error("Webhook error: " + resp.status + " " + text);
      }
      info("Submitted successfully. We‚Äôll review and follow up via your official email.");
      form.reset();
      submitBtn.disabled = true;
      readAgreement.checked = false;
      confirmRead.checked = false;
      window.scrollTo({top:0,behavior:'smooth'});
    }catch(err){
      console.error(err);
      invalid("Submission failed. If this persists, contact ScriptNova support.");
      submitBtn.disabled = false;
    }
  });

  // Accessibility: flag required fields on invalid input
  document.querySelectorAll('input[required],textarea[required],select[required]').forEach(el=>{
    el.addEventListener('invalid', () => el.setAttribute('aria-invalid','true'));
    el.addEventListener('input',  () => el.removeAttribute('aria-invalid'));
  });
</script>
</body>
</html>
